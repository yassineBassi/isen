<app-header
  title="Find New Friends"
>
  <div id="end-buttons">
    <ion-button
      (click)="presentSearchByModal()"
    >
      <i class="fas fa-filter"></i>
    </ion-button>
  </div>
</app-header>

<ion-row>
  <ion-col size="6" class="ion-no-padding">
    <ion-button
        expand="block"
        fill="clear"
        class="ion-no-margin tab-button text-capitalize"
        size="default"
        routerLinkActive="selected"
        [routerLinkActiveOptions]="{exact: true}"
        routerLink="/tabs/new-friends/list/near"
    >
      Near Users
    </ion-button>
  </ion-col>
  <ion-col size="6" class="ion-no-padding">
    <ion-button
        expand="block"
        fill="clear"
        class="ion-no-margin tab-button text-capitalize"
        size="default"
        routerLinkActive="selected"
        [routerLinkActiveOptions]="{exact: true}"
        routerLink="/tabs/new-friends/list/random"
    >
      Random Users
    </ion-button>
  </ion-col>
</ion-row>

<ion-content>

  <app-loader *ngIf="pageLoading" ></app-loader>

  <app-slides [authUser]="authUser" [random]="random" (back)="showSlides = false" *ngIf="showSlides" [initialSlide]="initialSlide" [users]="users"></app-slides>

  <ion-refresher *ngIf="!showSlides" slot="fixed" pullFactor="0.5" pullMin="100" pullMax="200"  (ionRefresh)="getNearUsers($event, true)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-card class="p-2" *ngIf="users && !users.length">
    <ion-card-subtitle>There is no friend in this area</ion-card-subtitle>
  </ion-card>

  <ion-row class="mt-1" *ngIf="users">
    <ion-col size="6" *ngFor="let user of users; let ind = index" (click)="showUser(ind)" >
      <div class="photo-container">
        <app-img-loader
          [src]="user.avatar.path"
          [style]="{
            position: 'absolute',
            top: 0,
            bottom: 0,
            left: 0,
            right: 0,
            width: '100%',
            height: '100%',
            'object-fit': 'cover',
            'object-position': 'center'
          }"
        >
        </app-img-loader>
        <div class="w-100 info-container p-2">
          <ion-label><i class="fas fa-circle online-icon mr-2"></i>{{ user.fullName }}</ion-label>
        </div>
      </div>
    </ion-col>
  </ion-row>

  <ion-infinite-scroll #infinitScroll threshold="100px" (ionInfinite)="getNearUsers($event)">
    <ion-infinite-scroll-content
      loadingSpinner="crescent"
    >
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>
