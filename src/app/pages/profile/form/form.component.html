<app-header [back]="true" title="Edit Profile">
  <div id="end-buttons">
    <ion-button (click)="submit()">
      <i class="fas fa-check"></i>
    </ion-button>
  </div>
</app-header>

<app-loader *ngIf="pageLoading"></app-loader>

<ion-content>
  <form class="p-2 ml-2" *ngIf="user" [formGroup]="form">
    <ion-text class="title"><i class="fas fa-info-circle mr-2"></i> Basic information</ion-text>
    <ion-list class="mx-3">
      <ion-item>
        <ion-label>
          <ion-text class="d-block"><i class="fas fa-user mr-2"></i>First Name: </ion-text>
          <ion-input placeholder="enter your first name" type="text" formControlName="firstName"></ion-input>
        </ion-label>
      </ion-item>
      <div class="mt-1" *ngIf="(firstName.dirty && !firstName.valid) || validatoErrors['firstName']">
        <span class="text-danger pl-1" >
          <span *ngIf="firstName.hasError('required')">first name is required</span>
          <span *ngIf="validatoErrors['firstName']">{{ validatoErrors['firstName'][0] }}</span>
        </span>
      </div>

      <ion-item class="mt-2">
        <ion-label>
          <ion-text class="d-block"><i class="fas fa-user mr-2"></i>Last Name: </ion-text>
          <ion-input placeholder="enter your last name" type="text" formControlName="lastName"></ion-input>
        </ion-label>
      </ion-item>
      <div class="mt-1" *ngIf="(lastName.dirty && !lastName.valid) || validatoErrors['lastName']">
        <span class="text-danger pl-1" >
          <span *ngIf="lastName.hasError('required')">last name is required</span>
          <span *ngIf="validatoErrors['stName']">{{ validatoErrors['lastName'] }}</span>
        </span>
      </div>

      <ion-item class="mt-2">
        <ion-label>
          <ion-text class="d-block"><i class="fas fa-birthday-cake mr-2"></i>Birth Day: </ion-text>
          <ion-input placeholder="select your birth day" formControlName="birthDate" type="date"></ion-input>
        </ion-label>
      </ion-item>
      <span class="text-danger pl-1" >
        <span *ngIf="birthDate.hasError('required')">birth day is required</span>
        <span *ngIf="validatoErrors['birthDate']">{{ validatoErrors['birthDate'] }}</span>
      </span>

      <ion-text class="d-block">
        <i class="fas fa-venus-mars mr-1"></i>
        Gender:
      </ion-text>
      <ion-item>
        <ion-select placeholder="select you gender" formControlName="gender" class="w-100 ion-no-padding pl-2">
          <ion-select-option value="female">Female</ion-select-option>
          <ion-select-option value="male">Male</ion-select-option>
        </ion-select>
      </ion-item>
      <span class="text-danger pl-1" >
        <span *ngIf="gender.hasError('required')">gender day is required</span>
        <span *ngIf="validatoErrors['gender']">{{ validatoErrors['gender'] }}</span>
      </span>

      <ion-item >
        <div class="w-100">
          <ion-label><i class="fas fa-map-marker-alt mr-2"></i>Address: </ion-label>
          <ion-textarea formControlName="address" class="pl-2" rows="3" placeholder="enter your address"></ion-textarea>
        </div>
      </ion-item>
      <span class="text-danger pl-1" >
        <span *ngIf="address.hasError('max')">the address field must not contain more than 255 characters</span>
        <span *ngIf="validatoErrors['address']">{{ validatoErrors['address'] }}</span>
      </span>
    </ion-list>

    <div class="mt-1">
      <ion-text class="title"><i class="fas fa-briefcase mr-2"></i> Profession</ion-text>
      <ion-item class="pl-2">
        <ion-label>
          <ion-input placeholder="enter your profession" type="text" formControlName="profession"></ion-input>
        </ion-label>
      </ion-item>
      <span class="text-danger pl-1" >
        <span *ngIf="profession.hasError('max')">the profession field must not contain more than 50 characters</span>
        <span *ngIf="validatoErrors['profession']">{{ validatoErrors['profession'] }}</span>
      </span>
    </div>

    <div class="mt-4">
      <ion-text class="title"><i class="fas fa-school mr-2"></i> School</ion-text>
      <ion-item class="pl-2">
        <ion-label>
          <ion-input placeholder="enter your school name" type="text" formControlName="school"></ion-input>
        </ion-label>
      </ion-item>
      <span class="text-danger pl-1" >
        <span *ngIf="school.hasError('max')">the school field must not contain more than 50 characters</span>
        <span *ngIf="validatoErrors['school']">{{ validatoErrors['school'] }}</span>
      </span>
    </div>

    <div class="mt-4" >
      <ion-text class="title"><i class="fas fa-graduation-cap mr-2"></i> Education</ion-text>
      <ion-item class="ml-3" lines="none">
        <ion-label>
          <ion-item>
            <ion-select placeholder="select your education degree" class="w-100 pl-1" formControlName="education">
              <ion-select-option [value]="degree" *ngFor="let degree of educationDegrees"> {{ degree }} </ion-select-option>
            </ion-select>
          </ion-item>
        </ion-label>
      </ion-item>
      <span class="text-danger pl-1" >
        <span *ngIf="education.hasError('max')">the education field must not contain more than 50 characters</span>
        <span *ngIf="validatoErrors['education']">{{ validatoErrors['education'] }}</span>
      </span>
    </div>

    <div class="mt-4">
      <ion-text class="title"><i class="fas fa-heart mr-2"></i>  Intersets</ion-text>
      <ion-row class="mt-3">
        <ion-col class="text-center ion-no-padding p-0" size="auto" *ngFor="let interest of interests; let ind=index">
          <ion-card class="text-center p-2 interest">
            <span>{{ interest }}</span>
            <span (click)="removeInterest(ind)" class="ml-2"><i class="fas fa-times"></i></span>
          </ion-card>
        </ion-col>
      </ion-row>
    </div>

    <div class="mb-3">
      <ion-item class="pl-2">
        <ion-input formControlName="interest" placeholder="new interest"></ion-input>
        <ion-buttons (click)="addInterest()" >
          <ion-button>
            <i class="fas fa-plus"></i>
          </ion-button>
        </ion-buttons>
      </ion-item>
      <div class="mt-1" *ngIf="(interest.dirty && !interest.valid) || validatoErrors['interests']">
        <span class="text-danger pl-2"*ngFor="let error of interest.errors">{{ error }}</span>
        <span *ngIf="validatoErrors['interests']">{{ validatoErrors['interests'] }}</span>
      </div>
    </div>
  </form>
</ion-content>
