<app-header [title]="channelName ? channelName : ''" [back]="true"></app-header>

<app-loader *ngIf="pageLoading" ></app-loader>

<ion-content>

  <ion-refresher slot="fixed" pullFactor="0.5" pullMin="100" pullMax="200"  (ionRefresh)="getChannelPosts($event, true)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <app-post-form (newPost)="addPost($event)" (closeForm)="showPostForm = false" [channelId]="channelId" *ngIf="channelId && showPostForm"></app-post-form>

  <div *ngIf="posts && posts.length">
    <app-post class="my-3" (removePost)="deletePost(post)" *ngFor="let post of posts" [post]="post"></app-post>
  </div>

  <ion-infinite-scroll #infinitScroll threshold="100px" (ionInfinite)="getChannelPosts($event)">
    <ion-infinite-scroll-content
      loadingSpinner="crescent"
    >
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>

  <ion-fab
    (click)="showPostForm = true"
    slot="fixed"
    vertical="bottom"
    horizontal="center"
    *ngIf="!showPostForm"
  >
    <ion-fab-button color="secondary">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>

</ion-content>
